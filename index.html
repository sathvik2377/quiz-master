<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="QuizMaster - Interactive learning hub with quizzes on idioms, synonyms, antonyms, homophones, spellings, and more!">
    <meta name="keywords" content="quiz, learning, education, idioms, synonyms, antonyms, homophones, spelling, interactive">
    <meta name="author" content="QuizMaster">
    <meta property="og:title" content="QuizMaster - Interactive Learning Hub">
    <meta property="og:description" content="Challenge your mind with interactive quizzes on various topics!">
    <meta property="og:type" content="website">
    <title>QuizMaster - Interactive Learning Hub</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß†</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background elements */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            animation: backgroundMove 20s ease-in-out infinite;
            z-index: -2;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,0.3), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.2), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.4), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.3), transparent),
                radial-gradient(2px 2px at 160px 30px, rgba(255,255,255,0.2), transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: sparkle 3s linear infinite;
            z-index: -1;
        }

        @keyframes backgroundMove {
            0%, 100% {
                transform: translateX(0) translateY(0) rotate(0deg);
            }
            33% {
                transform: translateX(-30px) translateY(-50px) rotate(120deg);
            }
            66% {
                transform: translateX(30px) translateY(50px) rotate(240deg);
            }
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 0.8;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
            position: relative;
            z-index: 10;
        }

        .header h1 {
            color: white;
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.2);
            animation: glow 2s ease-in-out infinite alternate;
        }

        .header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.2rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        @keyframes glow {
            from {
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.2);
            }
            to {
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 30px rgba(255,255,255,0.4);
            }
        }

        /* Floating elements */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        .floating-element:nth-child(1) {
            top: 10%;
            left: 10%;
            animation-delay: 0s;
            font-size: 2rem;
        }

        .floating-element:nth-child(2) {
            top: 20%;
            right: 10%;
            animation-delay: 1s;
            font-size: 1.5rem;
        }

        .floating-element:nth-child(3) {
            bottom: 30%;
            left: 15%;
            animation-delay: 2s;
            font-size: 1.8rem;
        }

        .floating-element:nth-child(4) {
            bottom: 20%;
            right: 20%;
            animation-delay: 3s;
            font-size: 2.2rem;
        }

        .floating-element:nth-child(5) {
            top: 50%;
            left: 5%;
            animation-delay: 4s;
            font-size: 1.6rem;
        }

        .floating-element:nth-child(6) {
            top: 60%;
            right: 5%;
            animation-delay: 5s;
            font-size: 1.9rem;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.1;
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
                opacity: 0.3;
            }
        }

        .quiz-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1), 0 0 0 1px rgba(255,255,255,0.2);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            animation: fadeInUp 1s ease-out;
            position: relative;
            z-index: 10;
        }

        .quiz-container.pdf-mode {
            max-width: 95vw;
            margin: 10px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .category-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .category-btn:nth-child(2) {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }

        .category-btn:nth-child(3) {
            background: linear-gradient(135deg, #45b7d1, #96c93d);
        }

        .category-btn:nth-child(4) {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .category-btn:nth-child(5) {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            color: #333;
        }

        .category-btn:nth-child(6) {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            color: #333;
        }

        .category-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .category-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .category-btn:hover::before {
            left: 100%;
        }

        .category-btn i {
            font-size: 2rem;
        }

        .question-section {
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .question-section.active {
            display: block;
        }

        .question-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
            animation: pulse 0.5s ease-out;
        }

        .question-title {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .option-btn {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .option-btn:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: scale(1.02);
        }

        .option-btn.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option-btn.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .score-display {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
            100% {
                transform: scale(1);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .quiz-container {
                padding: 20px;
                margin: 10px;
            }

            .category-grid {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .btn {
                justify-content: center;
            }

            .section-tabs {
                flex-direction: column;
                gap: 10px;
            }

            .section-btn {
                width: 100%;
                justify-content: center;
            }

            .equation-input {
                flex-direction: column;
                align-items: stretch;
            }

            .equation-input input {
                min-width: auto;
            }

            .calculator-buttons {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }

            .calc-btn {
                padding: 12px 8px;
                font-size: 0.9rem;
            }

            .desmos-container iframe {
                height: 400px;
            }

            .pdf-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .pdf-controls button {
                margin-bottom: 5px;
            }

            #pdfCanvas {
                max-width: 100%;
                height: auto;
            }

            #arihantPdf {
                height: 500px;
            }

            .index-content {
                grid-template-columns: 1fr;
            }

            .index-category {
                margin-bottom: 15px;
            }

            .pdf-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .pdf-controls button {
                margin-bottom: 5px;
            }

            .search-container {
                flex-direction: column;
                align-items: stretch;
            }

            .search-container input {
                margin-bottom: 10px;
            }
        }

        .timer-display {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        .question-timer, .total-timer {
            font-weight: bold;
            color: #333;
        }

        .question-timer {
            color: #dc3545;
        }

        .total-timer {
            color: #28a745;
        }

        .exam-reminder {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .exam-reminder i {
            margin-right: 10px;
        }

        .countdown {
            margin-top: 10px;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .section-tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .section-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-btn.active {
            background: linear-gradient(135deg, #764ba2, #667eea);
            transform: scale(1.05);
        }

        .theory-category {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .theory-category h3 {
            color: #333;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .theory-content {
            margin-bottom: 20px;
        }

        .theory-content h4 {
            color: #764ba2;
            margin-bottom: 10px;
        }

        .theory-content p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .theory-content ul {
            list-style-type: none;
            padding-left: 20px;
        }

        .theory-content li {
            color: #666;
            margin-bottom: 5px;
            position: relative;
        }

        .theory-content li:before {
            content: "‚Ä¢";
            color: #667eea;
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .practice-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }

        .question {
            margin-bottom: 20px;
        }

        .passage {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #e0e0e0;
        }

        .options {
            list-style-type: none;
            padding-left: 0;
        }

        .options li {
            padding: 8px 15px;
            margin: 5px 0;
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .options li:hover {
            background: #f0f0f0;
        }

        .show-answer {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .answer {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .graphing-controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }

        .equation-input {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .equation-input label {
            font-weight: bold;
            color: #333;
        }

        .equation-input input {
            flex: 1;
            min-width: 200px;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .equation-input input:focus {
            outline: none;
            border-color: #667eea;
        }

        .equation-list {
            margin-bottom: 20px;
        }

        .equation-list h4 {
            margin-bottom: 10px;
        }

        .equation-list ul {
            list-style-type: none;
            padding-left: 0;
        }

        .equation-list li {
            margin-bottom: 5px;
        }

        .desmos-container {
            margin-bottom: 20px;
        }

        .desmos-container iframe {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .graph-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .graph-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        #graphCanvas {
            width: 100%;
            height: 600px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }

        .calculator-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .calculator-display {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
        }

        .calculator-screen {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .calculator-history {
            font-size: 1.2rem;
            color: #333;
        }

        .calculator-input {
            font-size: 1.2rem;
            color: #333;
            width: 100%;
            text-align: right;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .calculator-row {
            display: contents;
        }

        .calc-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }

        .calc-function {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
        }

        .calc-clear {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }

        .calc-number {
            background: linear-gradient(135deg, #45b7d1, #96c93d);
        }

        .calc-operator {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .calc-equals {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
        }

        .equation-list li {
            margin-bottom: 5px;
        }

        .equation-examples {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .equation-examples h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .equation-examples ul {
            list-style-type: none;
            padding-left: 0;
        }

        .equation-examples li {
            margin-bottom: 8px;
            color: #666;
        }

        .equation-examples code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #333;
        }

        .pdf-upload {
            margin-bottom: 20px;
        }

        .pdf-search {
            margin-bottom: 20px;
        }

        .search-container {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }

        .search-container input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-container input:focus {
            border-color: #667eea;
        }

        .search-results {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid #667eea;
        }

        .search-results h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .search-result-item {
            background: white;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-result-item:hover {
            background: #f0f0f0;
            transform: translateX(5px);
        }

        .pdf-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .pdf-container {
            margin-bottom: 20px;
        }

        #pdfViewer {
            display: none;
        }

        #pdfPlaceholder {
            text-align: center;
            padding: 50px;
            color: #666;
        }

        #pdfCanvas {
            max-width: 100%;
            height: auto;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .index-section {
            margin-bottom: 20px;
        }

        .index-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .index-category {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid #667eea;
        }

        .index-category h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .index-list {
            list-style-type: none;
            padding-left: 0;
        }

        .index-list li {
            margin-bottom: 8px;
        }

        .index-list a {
            color: #667eea;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
            display: block;
        }

        .index-list a:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }
    </style>
</head>
<body>
    <!-- Floating background elements -->
    <div class="floating-elements">
        <div class="floating-element">üìö</div>
        <div class="floating-element">üß†</div>
        <div class="floating-element">üí°</div>
        <div class="floating-element">üéØ</div>
        <div class="floating-element">‚≠ê</div>
        <div class="floating-element">üöÄ</div>
    </div>

    <button class="back-btn" id="backBtn" style="display: none;">
        <i class="fas fa-arrow-left"></i>
    </button>

    <div class="header">
        <h1><i class="fas fa-brain"></i> QuizMaster</h1>
        <p>Challenge your mind with interactive quizzes!</p>
    </div>

    <div class="quiz-container">
        <!-- Main Menu -->
        <div id="mainMenu" class="main-menu">
            <div class="exam-reminder">
                <i class="fas fa-calendar-alt"></i>
                <span>BITSAT Exam: <span id="bitsatExamDate">June 22, 2025</span></span>
                <div class="countdown" id="examCountdown" style="background:linear-gradient(90deg,#ff6b6b,#ee5a24); color:white; border-radius:10px; padding:8px 0; margin:10px 0 0 0;"></div>
                <button id="askAiBtn" style="margin-top:30px; display:flex; align-items:center; justify-content:center; width:100%; font-size:1.5rem; padding:20px; border-radius:20px; background:linear-gradient(90deg,#667eea,#764ba2); color:white; border:none; box-shadow:0 4px 20px rgba(102,126,234,0.2); font-weight:bold; cursor:pointer; position:relative; overflow:hidden; outline:none;">
                    <span style="font-size:2.2rem; margin-right:18px; animation: ai-brain-bounce 1.2s infinite alternate cubic-bezier(.5,1.5,.5,1);">üß†</span>
                    <span>Ask AI</span>
                    <span class="ai-sparkle" style="position:absolute; right:30px; top:50%; transform:translateY(-50%); font-size:1.5rem; animation: ai-sparkle 1.2s infinite alternate;">‚ú®</span>
                </button>
            </div>
            <div class="section-tabs">
                <button class="section-btn active" onclick="showSection('practice')">
                    <i class="fas fa-pencil-alt"></i>
                    Practice
                </button>
                <button class="section-btn" onclick="showSection('graphing')">
                    <i class="fas fa-chart-line"></i>
                    Graphing Calculator
                </button>
                <button class="section-btn" onclick="showSection('calculator')">
                    <i class="fas fa-calculator"></i>
                    Scientific Calculator
                </button>
                <button class="section-btn" onclick="showSection('pdf')">
                    <i class="fas fa-file-pdf"></i>
                    Arihant
                </button>
            </div>
            <div id="practiceSection" class="category-grid">
                <button class="category-btn" onclick="startQuiz('grammar')">
                    <i class="fas fa-book"></i>
                    <span>Grammar</span>
                </button>
                <button class="category-btn" onclick="startQuiz('vocabulary')">
                    <i class="fas fa-language"></i>
                    <span>Vocabulary</span>
                </button>
                <button class="category-btn" onclick="startQuiz('phrasalVerbs')">
                    <i class="fas fa-comment-dots"></i>
                    <span>Phrasal Verbs & Idioms</span>
                </button>
                <button class="category-btn" onclick="startQuiz('analogy')">
                    <i class="fas fa-brain"></i>
                    <span>Analogy</span>
                </button>
            </div>
            <div id="graphingSection" style="display: none;">
                <div class="theory-category">
                    <h3><i class="fas fa-chart-line"></i> Desmos Graphing Calculator</h3>
                    <div class="theory-content">
                        <p>Enter mathematical equations to visualize them on the graph. You can plot functions, inequalities, and more!</p>
                        <div class="equation-examples">
                            <h4>Example Equations:</h4>
                            <ul>
                                <li><code>y = x^2</code> - Parabola</li>
                                <li><code>y = sin(x)</code> - Sine wave</li>
                                <li><code>y = x^3 - 2x</code> - Cubic function</li>
                                <li><code>x^2 + y^2 = 4</code> - Circle</li>
                                <li><code>y = 1/x</code> - Hyperbola</li>
                                <li><code>y = e^x</code> - Exponential</li>
                            </ul>
                        </div>
                        <div class="graphing-controls">
                            <div class="equation-input">
                                <label for="equationInput">Enter Equation:</label>
                                <input type="text" id="equationInput" placeholder="e.g., y = x^2, y = sin(x), x^2 + y^2 = 4" />
                                <button class="btn" onclick="addEquation()">
                                    <i class="fas fa-plus"></i> Add Equation
                                </button>
                                <button class="btn btn-secondary" onclick="clearEquations()">
                                    <i class="fas fa-trash"></i> Clear All
                                </button>
                            </div>
                            <div class="equation-list" id="equationList">
                                <h4>Current Equations:</h4>
                                <ul id="equationsList"></ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="desmos-container">
                    <div class="graph-controls">
                        <button class="btn" onclick="zoomIn()">
                            <i class="fas fa-search-plus"></i> Zoom In
                        </button>
                        <button class="btn" onclick="zoomOut()">
                            <i class="fas fa-search-minus"></i> Zoom Out
                        </button>
                        <button class="btn" onclick="resetView()">
                            <i class="fas fa-home"></i> Reset View
                        </button>
                        <button class="btn btn-secondary" onclick="toggleGrid()">
                            <i class="fas fa-th"></i> Toggle Grid
                        </button>
                    </div>
                    <div class="graph-container">
                        <canvas id="graphCanvas" width="800" height="600"></canvas>
                    </div>
                </div>
            </div>
            <div id="calculatorSection" style="display: none;">
                <div class="theory-category">
                    <h3><i class="fas fa-calculator"></i> Scientific Calculator</h3>
                    <div class="theory-content">
                        <p>Perform advanced mathematical calculations with this scientific calculator.</p>
                    </div>
                </div>
                <div class="calculator-container">
                    <div class="calculator-display">
                        <div class="calculator-screen">
                            <div class="calculator-history" id="calculatorHistory"></div>
                            <div class="calculator-input" id="calculatorInput">0</div>
                        </div>
                    </div>
                    <div class="calculator-buttons">
                        <div class="calculator-row">
                            <button class="calc-btn calc-function" onclick="calculatorFunction('sin')">sin</button>
                            <button class="calc-btn calc-function" onclick="calculatorFunction('cos')">cos</button>
                            <button class="calc-btn calc-function" onclick="calculatorFunction('tan')">tan</button>
                            <button class="calc-btn calc-clear" onclick="calculatorClear()">C</button>
                        </div>
                        <div class="calculator-row">
                            <button class="calc-btn calc-function" onclick="calculatorFunction('log')">log</button>
                            <button class="calc-btn calc-function" onclick="calculatorFunction('ln')">ln</button>
                            <button class="calc-btn calc-function" onclick="calculatorFunction('sqrt')">‚àö</button>
                            <button class="calc-btn calc-operator" onclick="calculatorOperator('^')">^</button>
                        </div>
                        <div class="calculator-row">
                            <button class="calc-btn calc-number" onclick="calculatorNumber('7')">7</button>
                            <button class="calc-btn calc-number" onclick="calculatorNumber('8')">8</button>
                            <button class="calc-btn calc-number" onclick="calculatorNumber('9')">9</button>
                            <button class="calc-btn calc-operator" onclick="calculatorOperator('/')">/</button>
                        </div>
                        <div class="calculator-row">
                            <button class="calc-btn calc-number" onclick="calculatorNumber('4')">4</button>
                            <button class="calc-btn calc-number" onclick="calculatorNumber('5')">5</button>
                            <button class="calc-btn calc-number" onclick="calculatorNumber('6')">6</button>
                            <button class="calc-btn calc-operator" onclick="calculatorOperator('*')">√ó</button>
                        </div>
                        <div class="calculator-row">
                            <button class="calc-btn calc-number" onclick="calculatorNumber('1')">1</button>
                            <button class="calc-btn calc-number" onclick="calculatorNumber('2')">2</button>
                            <button class="calc-btn calc-number" onclick="calculatorNumber('3')">3</button>
                            <button class="calc-btn calc-operator" onclick="calculatorOperator('-')">-</button>
                        </div>
                        <div class="calculator-row">
                            <button class="calc-btn calc-number" onclick="calculatorNumber('0')">0</button>
                            <button class="calc-btn calc-number" onclick="calculatorNumber('.')">.</button>
                            <button class="calc-btn calc-equals" onclick="calculatorEquals()">=</button>
                            <button class="calc-btn calc-operator" onclick="calculatorOperator('+')">+</button>
                        </div>
                        <div class="calculator-row">
                            <button class="calc-btn calc-function" onclick="calculatorFunction('pi')">œÄ</button>
                            <button class="calc-btn calc-function" onclick="calculatorFunction('e')">e</button>
                            <button class="calc-btn calc-function" onclick="calculatorFunction('abs')">|x|</button>
                            <button class="calc-btn calc-function" onclick="calculatorFunction('factorial')">n!</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="pdfSection" style="display: none;">
                <div class="theory-category">
                    <h3><i class="fas fa-file-pdf"></i> Arihant Study Material</h3>
                    <div class="theory-content">
                        <p>Access the Arihant study guide directly in your browser. This comprehensive resource covers all topics for your exam preparation.</p>
                        <div class="pdf-controls">
                            <button class="btn" onclick="openPdfInNewTab()">
                                <i class="fas fa-external-link-alt"></i> Open in New Tab
                            </button>
                            <button class="btn" onclick="downloadPdf()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                        </div>
                        <div class="pdf-search">
                            <div class="search-container">
                                <input type="text" id="pdfSearchInput" placeholder="Search in PDF..." onkeypress="handleSearchKeypress(event)">
                                <button class="btn" onclick="searchInPdf()">
                                    <i class="fas fa-search"></i> Search
                                </button>
                                <button class="btn btn-secondary" onclick="clearSearch()">
                                    <i class="fas fa-times"></i> Clear
                                </button>
                            </div>
                            <div id="searchResults" class="search-results" style="display: none;">
                                <h4>Search Results:</h4>
                                <div id="searchResultsList"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pdf-container">
                    <iframe id="arihantPdf" 
                            src="https://filetools3.pdf24.org/client.php?mode=inline&file=joinPdf_wis7k7mpk3dbddiaaurrp6wbo2_1040421433864646797.pdf&action=getFile" 
                            width="100%" 
                            height="800" 
                            style="border: none; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    </iframe>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quizSection" class="question-section">
            <div class="question-card">
                <div class="question-title" id="categoryTitle">Category</div>
                <div class="timer-display">
                    <div class="question-timer">Question Time: <span id="questionTimer">30</span>s</div>
                    <div class="total-timer">Total Time: <span id="totalTimer">00:00</span></div>
                </div>
                <div class="question-text" id="questionText">Question will appear here</div>
                <div class="options-grid" id="optionsContainer">
                    <!-- Options will be generated dynamically -->
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-secondary" onclick="showMainMenu()">
                    <i class="fas fa-home"></i> Main Menu
                </button>
                <div class="score-display">
                    <i class="fas fa-star"></i> Score: <span id="scoreValue">0</span>
                </div>
                <button class="btn btn-success" onclick="generateQuestion()">
                    <i class="fas fa-refresh"></i> New Question
                </button>
            </div>
        </div>
    </div>

    <div id="userModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:2000; justify-content:center; align-items:center;">
        <div style="background:white; border-radius:15px; padding:30px; max-width:90vw; min-width:300px; box-shadow:0 8px 32px rgba(0,0,0,0.2); text-align:center;">
            <h2>Welcome to QuizMaster!</h2>
            <p>Please enter your name and select your BITSAT exam date:</p>
            <input id="userNameInput" type="text" placeholder="Your Name" style="padding:10px; border-radius:8px; border:1px solid #ccc; width:80%; margin-bottom:15px;" /><br>
            <select id="examDateSelect" style="padding:10px; border-radius:8px; border:1px solid #ccc; width:80%; margin-bottom:15px;">
                <option value="2025-06-22">22 June 2025</option>
                <option value="2025-06-23">23 June 2025</option>
                <option value="2025-06-24">24 June 2025</option>
                <option value="2025-06-25">25 June 2025</option>
                <option value="2025-06-26">26 June 2025</option>
            </select><br>
            <button onclick="saveUserInfo()" style="padding:10px 25px; border-radius:8px; background:#667eea; color:white; border:none; font-weight:bold;">Start</button>
        </div>
    </div>

    <!-- AI Prompt Modal -->
    <div id="aiModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:3000; justify-content:center; align-items:center;">
      <div style="background:white; border-radius:18px; padding:32px; max-width:95vw; min-width:320px; box-shadow:0 8px 32px rgba(0,0,0,0.2); text-align:center; position:relative;">
        <button onclick="closeAiModal()" style="position:absolute; top:12px; right:18px; background:none; border:none; font-size:1.5rem; color:#667eea; cursor:pointer;">&times;</button>
        <div style="font-size:2.5rem; margin-bottom:10px; animation: ai-brain-bounce 1.2s infinite alternate cubic-bezier(.5,1.5,.5,1);">üß†</div>
        <h2>Ask AI Anything!</h2>
        <textarea id="aiQuestion" rows="3" placeholder="Type your question here..." style="width:90%; padding:12px; border-radius:8px; border:1px solid #ccc; margin:18px 0; font-size:1.1rem;"></textarea><br>
        <button onclick="askAi()" style="padding:12px 32px; border-radius:8px; background:#667eea; color:white; border:none; font-weight:bold; font-size:1.1rem;">Ask</button>
        <div id="aiAnswer" style="margin-top:24px; font-size:1.15rem; color:#333; min-height:40px;"></div>
      </div>
    </div>

    <script>
        // Quiz data
        const quizData = {
            grammar: [
                {
                    question: "Which sentence demonstrates correct use of the subjunctive mood?",
                    options: [
                        "I suggest that he goes to the doctor.",
                        "I suggest that he go to the doctor.",
                        "I suggest that he will go to the doctor.",
                        "I suggest that he went to the doctor."
                    ],
                    correct: 1,
                    explanation: "The subjunctive mood uses the base form of the verb after 'suggest that'."
                },
                {
                    question: "Identify the correct use of the past perfect tense:",
                    options: [
                        "I had finished my homework when my friend called.",
                        "I finished my homework when my friend had called.",
                        "I have finished my homework when my friend called.",
                        "I finished my homework when my friend called."
                    ],
                    correct: 0,
                    explanation: "The past perfect is used for the action that happened first in the past."
                }
            ],
            vocabulary: [
                {
                    question: "What is the contextual meaning of 'ubiquitous' in academic writing?",
                    options: [
                        "Rare and unusual",
                        "Present everywhere",
                        "Extremely valuable",
                        "Temporarily available"
                    ],
                    correct: 1,
                    explanation: "In academic contexts, 'ubiquitous' means present, appearing, or found everywhere."
                },
                {
                    question: "Which word is NOT a collocation with 'make'?",
                    options: [
                        "make a decision",
                        "make a mistake",
                        "make a homework",
                        "make a difference"
                    ],
                    correct: 2,
                    explanation: "The correct collocation is 'do homework', not 'make homework'."
                }
            ],
            phrasalVerbs: [
                {
                    question: "What does 'to brush up on' mean?",
                    options: [
                        "To clean something thoroughly",
                        "To improve existing knowledge",
                        "To remove something completely",
                        "To start learning something new"
                    ],
                    correct: 1,
                    explanation: "'To brush up on' means to improve or refresh one's knowledge of something."
                },
                {
                    question: "Which phrasal verb means 'to tolerate'?",
                    options: [
                        "put up with",
                        "put down to",
                        "put off by",
                        "put on to"
                    ],
                    correct: 0,
                    explanation: "'Put up with' means to tolerate or endure something unpleasant."
                }
            ],
            analogy: [
                {
                    question: "Book is to reading as fork is to:",
                    options: [
                        "eating",
                        "cooking",
                        "cutting",
                        "serving"
                    ],
                    correct: 0,
                    explanation: "A book is a tool for reading, just as a fork is a tool for eating."
                },
                {
                    question: "Doctor is to hospital as teacher is to:",
                    options: [
                        "classroom",
                        "student",
                        "book",
                        "education"
                    ],
                    correct: 0,
                    explanation: "A doctor works in a hospital, just as a teacher works in a classroom."
                }
            ]
        };

        // Game state
        let currentCategory = '';
        let currentQuestion = null;
        let score = 0;
        let answered = false;
        let questionTimer;
        let totalTimer;
        let totalSeconds = 0;
        let questionSeconds = 30;

        // Initialize the game
        function init() {
            // Show practice section by default
            document.getElementById('practiceSection').style.display = 'grid';
            document.getElementById('graphingSection').style.display = 'none';
            document.getElementById('calculatorSection').style.display = 'none';
            document.getElementById('pdfSection').style.display = 'none';
            document.getElementById('quizSection').classList.remove('active');
            document.getElementById('backBtn').style.display = 'none';
        }

        // Show main menu
        function showMainMenu() {
            document.getElementById('practiceSection').style.display = 'grid';
            document.getElementById('graphingSection').style.display = 'none';
            document.getElementById('calculatorSection').style.display = 'none';
            document.getElementById('pdfSection').style.display = 'none';
            document.getElementById('quizSection').classList.remove('active');
            document.getElementById('backBtn').style.display = 'none';
            currentCategory = '';
            stopTimers();
        }

        // Timer functions
        function startQuestionTimer() {
            questionSeconds = 30;
            updateQuestionTimer();
            questionTimer = setInterval(() => {
                questionSeconds--;
                updateQuestionTimer();
                if (questionSeconds <= 0) {
                    clearInterval(questionTimer);
                    handleTimeUp();
                }
            }, 2000);
        }

        function startTotalTimer() {
            totalTimer = setInterval(() => {
                totalSeconds++;
                updateTotalTimer();
            }, 2000);
        }

        function stopTimers() {
            clearInterval(questionTimer);
            clearInterval(totalTimer);
        }

        function updateQuestionTimer() {
            document.getElementById('questionTimer').textContent = questionSeconds;
        }

        function updateTotalTimer() {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            document.getElementById('totalTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function handleTimeUp() {
            if (!answered) {
                answered = true;
                score = Math.max(0, score - 1);
                document.getElementById('scoreValue').textContent = score;
                showFeedback('Time\'s up! ' + currentQuestion.explanation, 'error');
                setTimeout(() => {
                    generateQuestion();
                }, 3000);
            }
        }

        // Show section function
        function showSection(section) {
            const practiceSection = document.getElementById('practiceSection');
            const graphingSection = document.getElementById('graphingSection');
            const calculatorSection = document.getElementById('calculatorSection');
            const pdfSection = document.getElementById('pdfSection');
            const buttons = document.querySelectorAll('.section-btn');
            const quizContainer = document.querySelector('.quiz-container');

            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');

            practiceSection.style.display = 'none';
            graphingSection.style.display = 'none';
            calculatorSection.style.display = 'none';
            pdfSection.style.display = 'none';

            if (section === 'practice') {
                practiceSection.style.display = 'grid';
                quizContainer.classList.remove('pdf-mode');
            } else if (section === 'graphing') {
                graphingSection.style.display = 'block';
                quizContainer.classList.remove('pdf-mode');
                // Initialize graph when section is shown
                setTimeout(() => {
                    initGraph();
                    initMouseEvents();
                }, 100);
            } else if (section === 'calculator') {
                calculatorSection.style.display = 'block';
                quizContainer.classList.remove('pdf-mode');
            } else {
                pdfSection.style.display = 'block';
                quizContainer.classList.add('pdf-mode');
            }
        }

        // Start a quiz category
        function startQuiz(category) {
            currentCategory = category;
            document.getElementById('practiceSection').style.display = 'none';
            document.getElementById('graphingSection').style.display = 'none';
            document.getElementById('calculatorSection').style.display = 'none';
            document.getElementById('pdfSection').style.display = 'none';
            document.getElementById('quizSection').classList.add('active');
            document.getElementById('backBtn').style.display = 'block';

            // Set category title
            const categoryTitles = {
                grammar: 'Grammar Mastery',
                vocabulary: 'Vocabulary Challenge',
                phrasalVerbs: 'Phrasal Verbs & Idioms',
                analogy: 'Analogical Reasoning'
            };

            document.getElementById('categoryTitle').textContent = categoryTitles[category];
            score = 0;
            totalSeconds = 0;
            document.getElementById('scoreValue').textContent = score;
            startTotalTimer();
            generateQuestion();
        }

        // Generate a random question
        function generateQuestion() {
            if (!currentCategory || !quizData[currentCategory]) return;

            const questions = quizData[currentCategory];
            const randomIndex = Math.floor(Math.random() * questions.length);
            currentQuestion = questions[randomIndex];
            answered = false;

            // Display question
            document.getElementById('questionText').textContent = currentQuestion.question;

            // Generate options
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            currentQuestion.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = option;
                optionBtn.onclick = () => selectOption(index, optionBtn);
                optionsContainer.appendChild(optionBtn);
            });

            startQuestionTimer();
        }

        // Handle option selection
        function selectOption(selectedIndex, buttonElement) {
            if (answered) return;

            answered = true;
            clearInterval(questionTimer);
            const isCorrect = selectedIndex === currentQuestion.correct;

            // Show correct/incorrect styling
            const allOptions = document.querySelectorAll('.option-btn');
            allOptions.forEach((btn, index) => {
                if (index === currentQuestion.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    btn.classList.add('incorrect');
                }
                btn.style.pointerEvents = 'none';
            });

            // Update score
            if (isCorrect) {
                score += 3;
                document.getElementById('scoreValue').textContent = score;
                showFeedback('Correct! ' + currentQuestion.explanation, 'success');
            } else {
                score = Math.max(0, score - 1);
                document.getElementById('scoreValue').textContent = score;
                showFeedback('Incorrect. ' + currentQuestion.explanation, 'error');
            }

            // Auto-generate new question after delay
            setTimeout(() => {
                generateQuestion();
            }, 3000);
        }

        // Show feedback message
        function showFeedback(message, type) {
            // Create feedback element
            const feedback = document.createElement('div');
            feedback.className = `feedback ${type}`;
            feedback.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#d4edda' : '#f8d7da'};
                color: ${type === 'success' ? '#155724' : '#721c24'};
                border: 1px solid ${type === 'success' ? '#c3e6cb' : '#f5c6cb'};
                border-radius: 10px;
                padding: 15px 20px;
                max-width: 300px;
                z-index: 1000;
                animation: slideInRight 0.5s ease-out;
            `;
            feedback.textContent = message;

            document.body.appendChild(feedback);

            // Remove after 3 seconds
            setTimeout(() => {
                feedback.style.animation = 'slideOutRight 0.5s ease-out';
                setTimeout(() => {
                    document.body.removeChild(feedback);
                }, 500);
            }, 2500);
        }

        // Back button functionality
        document.getElementById('backBtn').onclick = showMainMenu;

        // Update BITSAT Exam Countdown
        function updateExamCountdown() {
            const examDate = new Date('2025-06-22T00:00:00');
            const now = new Date();
            const diff = examDate - now;

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

            document.getElementById('examCountdown').textContent = 
                `${days} days, ${hours} hours, ${minutes} minutes until BITSAT`;
        }

        // Initialize exam countdown
        updateExamCountdown();
        setInterval(updateExamCountdown, 60000); // Update every minute

        // Initialize the game when page loads
        window.onload = init;

        // Graphing Calculator Functions
        let equations = [];
        let canvas, ctx;
        let scale = 50;
        let offsetX = 0;
        let offsetY = 0;
        let showGrid = true;
        let colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#F093FB', '#FFD93D', '#6BCF7F', '#A8E6CF', '#FF8B94'];

        function initGraph() {
            canvas = document.getElementById('graphCanvas');
            ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            drawGraph();
        }

        function addEquation() {
            const equationInput = document.getElementById('equationInput');
            const equation = equationInput.value.trim();
            
            if (equation) {
                equations.push(equation);
                updateEquationsList();
                equationInput.value = '';
                drawGraph();
            }
        }

        function clearEquations() {
            equations = [];
            updateEquationsList();
            drawGraph();
        }

        function updateEquationsList() {
            const equationsList = document.getElementById('equationsList');
            equationsList.innerHTML = '';
            
            equations.forEach((equation, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span style="color: ${colors[index % colors.length]}; font-weight: bold;">${equation}</span>
                    <button class="btn btn-secondary" onclick="removeEquation(${index})" style="margin-left: 10px; padding: 5px 10px; font-size: 0.8rem;">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                equationsList.appendChild(li);
            });
        }

        function removeEquation(index) {
            equations.splice(index, 1);
            updateEquationsList();
            drawGraph();
        }

        function drawGraph() {
            if (!ctx) return;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            if (showGrid) {
                drawGrid();
            }
            
            // Draw axes
            drawAxes();
            
            // Draw equations
            equations.forEach((equation, index) => {
                drawEquation(equation, colors[index % colors.length]);
            });
        }

        function drawGrid() {
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            
            const centerX = canvas.width / 2 + offsetX;
            const centerY = canvas.height / 2 + offsetY;
            
            // Vertical lines
            for (let x = centerX % scale; x < canvas.width; x += scale) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // Horizontal lines
            for (let y = centerY % scale; y < canvas.height; y += scale) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
        }

        function drawAxes() {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            const centerX = canvas.width / 2 + offsetX;
            const centerY = canvas.height / 2 + offsetY;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(canvas.width, centerY);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, canvas.height);
            ctx.stroke();
            
            // Draw axis labels
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            // X-axis labels
            for (let x = centerX % scale; x < canvas.width; x += scale) {
                const value = Math.round((x - centerX) / scale);
                if (value !== 0) {
                    ctx.fillText(value.toString(), x, centerY + 15);
                }
            }
            
            // Y-axis labels
            for (let y = centerY % scale; y < canvas.height; y += scale) {
                const value = Math.round((centerY - y) / scale);
                if (value !== 0) {
                    ctx.fillText(value.toString(), centerX - 15, y + 4);
                }
            }
        }

        function drawEquation(equation, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            const centerX = canvas.width / 2 + offsetX;
            const centerY = canvas.height / 2 + offsetY;
            
            let firstPoint = true;
            
            for (let pixelX = 0; pixelX < canvas.width; pixelX++) {
                const worldX = (pixelX - centerX) / scale;
                let worldY;
                
                try {
                    // Try to evaluate the equation
                    if (equation.includes('y =')) {
                        // Explicit function: y = f(x)
                        const func = equation.replace('y =', '').trim();
                        worldY = math.evaluate(func, {x: worldX});
                    } else if (equation.includes('x =')) {
                        // Explicit function: x = f(y)
                        const func = equation.replace('x =', '').trim();
                        const worldXFromY = math.evaluate(func, {y: worldX});
                        worldY = worldX;
                        worldX = worldXFromY;
                    } else if (equation.includes('=')) {
                        // Implicit function: try to solve for y
                        const parts = equation.split('=');
                        if (parts.length === 2) {
                            const leftSide = parts[0].trim();
                            const rightSide = parts[1].trim();
                            
                            // Try to solve for y
                            try {
                                const expr = math.parse(leftSide + ' - (' + rightSide + ')');
                                const ySymbol = math.parse('y');
                                const xSymbol = math.parse('x');
                                
                                // For simple cases, try to isolate y
                                if (leftSide.includes('y') && !rightSide.includes('y')) {
                                    worldY = math.evaluate(rightSide, {x: worldX});
                                } else if (rightSide.includes('y') && !leftSide.includes('y')) {
                                    worldY = math.evaluate(leftSide, {x: worldX});
                                } else {
                                    // For more complex cases, try numerical approach
                                    worldY = solveForY(equation, worldX);
                                }
                            } catch (e) {
                                worldY = solveForY(equation, worldX);
                            }
                        }
                    } else {
                        // Assume it's y = f(x) without the y =
                        worldY = math.evaluate(equation, {x: worldX});
                    }
                    
                    const pixelY = centerY - worldY * scale;
                    
                    if (pixelY >= 0 && pixelY < canvas.height && isFinite(worldY)) {
                        if (firstPoint) {
                            ctx.moveTo(pixelX, pixelY);
                            firstPoint = false;
                        } else {
                            ctx.lineTo(pixelX, pixelY);
                        }
                    }
                } catch (error) {
                    // Skip invalid points
                    continue;
                }
            }
            
            ctx.stroke();
        }

        function solveForY(equation, x) {
            // Simple numerical approach for implicit equations
            // Try different y values to find where the equation equals zero
            for (let y = -10; y <= 10; y += 0.1) {
                try {
                    const result = math.evaluate(equation, {x: x, y: y});
                    if (Math.abs(result) < 0.1) {
                        return y;
                    }
                } catch (e) {
                    continue;
                }
            }
            return NaN;
        }

        function zoomIn() {
            scale *= 1.2;
            drawGraph();
        }

        function zoomOut() {
            scale /= 1.2;
            drawGraph();
        }

        function resetView() {
            scale = 50;
            offsetX = 0;
            offsetY = 0;
            drawGraph();
        }

        function toggleGrid() {
            showGrid = !showGrid;
            drawGraph();
        }

        // Add mouse interaction for panning
        let isDragging = false;
        let lastX, lastY;

        function initMouseEvents() {
            canvas.addEventListener('mousedown', (e) => {
                isDragging = true;
                lastX = e.clientX;
                lastY = e.clientY;
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const deltaX = e.clientX - lastX;
                    const deltaY = e.clientY - lastY;
                    offsetX += deltaX;
                    offsetY += deltaY;
                    lastX = e.clientX;
                    lastY = e.clientY;
                    drawGraph();
                }
            });
            
            canvas.addEventListener('mouseup', () => {
                isDragging = false;
            });
            
            canvas.addEventListener('wheel', (e) => {
                e.preventDefault();
                if (e.deltaY < 0) {
                    zoomIn();
                } else {
                    zoomOut();
                }
            });
        }

        // Scientific Calculator Functions
        let calculatorInput = '0';
        let calculatorHistory = '';
        let waitingForOperand = false;

        function calculatorNumber(num) {
            if (waitingForOperand) {
                calculatorInput = num;
                waitingForOperand = false;
            } else {
                calculatorInput = calculatorInput === '0' ? num : calculatorInput + num;
            }
            updateCalculatorDisplay();
        }

        function calculatorOperator(operator) {
            const inputValue = parseFloat(calculatorInput);
            
            if (calculatorHistory && !waitingForOperand) {
                calculatorEquals();
            }
            
            calculatorHistory = calculatorInput + ' ' + operator;
            waitingForOperand = true;
            updateCalculatorDisplay();
        }

        function calculatorFunction(func) {
            const inputValue = parseFloat(calculatorInput);
            let result;
            
            switch(func) {
                case 'sin':
                    result = Math.sin(inputValue * Math.PI / 180);
                    break;
                case 'cos':
                    result = Math.cos(inputValue * Math.PI / 180);
                    break;
                case 'tan':
                    result = Math.tan(inputValue * Math.PI / 180);
                    break;
                case 'log':
                    result = Math.log10(inputValue);
                    break;
                case 'ln':
                    result = Math.log(inputValue);
                    break;
                case 'sqrt':
                    result = Math.sqrt(inputValue);
                    break;
                case 'pi':
                    result = Math.PI;
                    break;
                case 'e':
                    result = Math.E;
                    break;
                case 'abs':
                    result = Math.abs(inputValue);
                    break;
                case 'factorial':
                    result = factorial(inputValue);
                    break;
            }
            
            calculatorInput = result.toString();
            updateCalculatorDisplay();
        }

        function factorial(n) {
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        function calculatorEquals() {
            const inputValue = parseFloat(calculatorInput);
            
            if (calculatorHistory) {
                const historyValue = parseFloat(calculatorHistory);
                const operator = calculatorHistory.split(' ')[1];
                let result;
                
                switch(operator) {
                    case '+':
                        result = historyValue + inputValue;
                        break;
                    case '-':
                        result = historyValue - inputValue;
                        break;
                    case '*':
                        result = historyValue * inputValue;
                        break;
                    case '/':
                        result = historyValue / inputValue;
                        break;
                    case '^':
                        result = Math.pow(historyValue, inputValue);
                        break;
                }
                
                calculatorInput = result.toString();
                calculatorHistory = '';
                waitingForOperand = true;
                updateCalculatorDisplay();
            }
        }

        function calculatorClear() {
            calculatorInput = '0';
            calculatorHistory = '';
            waitingForOperand = false;
            updateCalculatorDisplay();
        }

        function updateCalculatorDisplay() {
            document.getElementById('calculatorInput').textContent = calculatorInput;
            document.getElementById('calculatorHistory').textContent = calculatorHistory;
        }

        // PDF Reader Functions
        function openPdfInNewTab() {
            window.open('https://filetools3.pdf24.org/client.php?mode=inline&file=joinPdf_wis7k7mpk3dbddiaaurrp6wbo2_1040421433864646797.pdf&action=getFile', '_blank');
        }

        function downloadPdf() {
            const link = document.createElement('a');
            link.href = 'https://filetools3.pdf24.org/client.php?mode=inline&file=joinPdf_wis7k7mpk3dbddiaaurrp6wbo2_1040421433864646797.pdf&action=getFile';
            link.download = 'Arihant_Study_Material.pdf';
            link.target = '_blank';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // PDF Search Functions
        function handleSearchKeypress(event) {
            if (event.key === 'Enter') {
                searchInPdf();
            }
        }

        function searchInPdf() {
            const searchTerm = document.getElementById('pdfSearchInput').value.trim();
            if (searchTerm) {
                // Show notification
                showNotification(`Searching for "${searchTerm}"...`);
                
                // Try to search in the PDF using the PDF viewer's search functionality
                const pdfFrame = document.getElementById('arihantPdf');
                if (pdfFrame) {
                    // Add search parameter to the PDF URL
                    const baseUrl = 'https://filetools3.pdf24.org/client.php?mode=inline&file=joinPdf_wis7k7mpk3dbddiaaurrp6wbo2_1040421433864646797.pdf&action=getFile';
                    const newUrl = `${baseUrl}#search=${encodeURIComponent(searchTerm)}`;
                    pdfFrame.src = newUrl;
                    
                    // Scroll to the PDF viewer
                    pdfFrame.scrollIntoView({ behavior: 'smooth' });
                }
                
                // Show search results (simulated for now)
                showSearchResults(searchTerm);
            }
        }

        function showSearchResults(searchTerm) {
            const resultsContainer = document.getElementById('searchResults');
            const resultsList = document.getElementById('searchResultsList');
            
            // Simulate search results (you can replace this with actual search logic)
            const mockResults = [
                { page: 15, context: `...found "${searchTerm}" in the grammar section...` },
                { page: 45, context: `...another occurrence of "${searchTerm}" in vocabulary...` },
                { page: 78, context: `..."${searchTerm}" appears in the reading comprehension...` }
            ];
            
            resultsList.innerHTML = '';
            mockResults.forEach(result => {
                const resultItem = document.createElement('div');
                resultItem.className = 'search-result-item';
                resultItem.innerHTML = `
                    <strong>Page ${result.page}</strong><br>
                    <span>${result.context}</span>
                `;
                resultItem.onclick = () => navigateToPage(result.page);
                resultsList.appendChild(resultItem);
            });
            
            resultsContainer.style.display = 'block';
        }

        function navigateToPage(page) {
            const pdfFrame = document.getElementById('arihantPdf');
            if (pdfFrame) {
                const baseUrl = 'https://filetools3.pdf24.org/client.php?mode=inline&file=joinPdf_wis7k7mpk3dbddiaaurrp6wbo2_1040421433864646797.pdf&action=getFile';
                const newUrl = `${baseUrl}#page=${page}`;
                pdfFrame.src = newUrl;
                pdfFrame.scrollIntoView({ behavior: 'smooth' });
                showNotification(`Navigating to page ${page}...`);
            }
        }

        function clearSearch() {
            document.getElementById('pdfSearchInput').value = '';
            document.getElementById('searchResults').style.display = 'none';
            
            // Reset PDF to original URL
            const pdfFrame = document.getElementById('arihantPdf');
            if (pdfFrame) {
                const baseUrl = 'https://filetools3.pdf24.org/client.php?mode=inline&file=joinPdf_wis7k7mpk3dbddiaaurrp6wbo2_1040421433864646797.pdf&action=getFile';
                pdfFrame.src = baseUrl;
            }
        }

        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'pdf-notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #667eea;
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideInRight 0.5s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease-out';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }

        function saveUserInfo() {
            const userName = document.getElementById('userNameInput').value;
            const examDate = document.getElementById('examDateSelect').value;
            localStorage.setItem('userName', userName);
            localStorage.setItem('examDate', examDate);
            showMainMenu();
        }

        window.saveUserInfo = saveUserInfo;

        // AI Prompt Functions
        function askAi() {
            const question = document.getElementById('aiQuestion').value.trim();
            const answerDiv = document.getElementById('aiAnswer');
            if (!question) {
                answerDiv.textContent = 'Please enter a question.';
                return;
            }
            answerDiv.innerHTML = '<span style="color:#667eea;">Thinking <span class="ai-sparkle">‚ú®</span></span>';
            fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyAOu3n2b83ZBWStPJPBADWPjK4fJkzbVys', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: question }] }]
                })
            })
            .then(res => res.json())
            .then(data => {
                const answer = data.candidates?.[0]?.content?.parts?.[0]?.text || 'No answer from AI.';
                answerDiv.textContent = answer;
            })
            .catch(() => {
                answerDiv.textContent = 'Sorry, there was an error contacting the AI.';
            });
        }

        function closeAiModal() {
            document.getElementById('aiModal').style.display = 'none';
        }
    </script>

    <style>
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        @keyframes ai-brain-bounce {
          0% { transform: translateY(0) scale(1); }
          100% { transform: translateY(-10px) scale(1.08); }
        }
        @keyframes ai-sparkle {
          0% { opacity:0.5; transform:scale(1) rotate(0deg); }
          100% { opacity:1; transform:scale(1.3) rotate(20deg); }
        }
    </style>

</body>
</html>
